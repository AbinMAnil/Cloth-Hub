<%- include('./partials/headers')%> 
<%-include('./partials/!docType')%>
<% console.log(data) %> 
<% if(data.length <= 0 ){ %> 
<div class="container-fluid " >
     <div class="row">
          <div class="col-md-3"></div>
         <div class="col-md-7 ">
             <div class="card shadow ">
                 <div class="card-body cart">
                     <div class="col-sm-12 empty-cart-cls text-center"> <img src="https://i.imgur.com/dCdflKN.png" width="130" height="130" class="img-fluid mb-4 mr-3">
                         <h3><strong>Your Wishlist is Empty</strong></h3>
                         <h4>Add something to make me happy :)</h4> <a href="/product" class="btn btn-primary cart-btn-transform m-3" data-abc="true">continue shopping</a>
                     </div>
                 </div>
             </div>
         </div>
     </div>
 </div>
<% }else{ %> 

     <div class="container-fluid " id="emptyCart" style="display: none;">
          <div class="row">
               <div class="col-md-3"></div>
              <div class="col-md-7 ">
                  <div class="card shadow ">
                      <div class="card-body cart">
                          <div class="col-sm-12 empty-cart-cls text-center"> <img src="https://i.imgur.com/dCdflKN.png" width="130" height="130" class="img-fluid mb-4 mr-3">
                              <h3><strong>Your Cart is Empty</strong></h3>
                              <h4>Add something to make me happy :)</h4> <a href="/product" class="btn btn-primary cart-btn-transform m-3" data-abc="true">continue shopping</a>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>

<div class="container shadow mt-5" id="cartItems">
     <div class="row " >
       <h1>cart</h1>

     <%# console.log(data.[0]._id) %> 
     

         <!-- ----------------------------------------------------loop strart herer ------------------------------------------- -->
         <% for(var i = 0 ; i< data.length ; i++){ %> 
          <div class=" col-md-12 " id="tableRow<%=data[i].productArray._id%>">
               
               <div class="image-session ">
                  <div class="imageContainer shadow-lg">
                       <a href="/product/productDetails?id=<%=data[i].productArray._id  %> " >
                     <img src="<%=data[i].productArray.image[0].imageUrl%>" alt="" style="width: 100%; height: 100%; object-fit: contain;">
                     </a>
                  </div>
               </div>
               <!-- ---------------- -->
               <div class="center-details align-left mt-4">
                    <div class="" style="display: flex; flex-direction: row; justify-content: space-evenly;">
                    <span><%=data[i].productArray.productName%></span>
                   
                    <span ><b>Price : <span style="color: green;">â‚¹ <span id="price<%=data[i].productArray.price%>"><%=data[i].productArray.price%> </span>.00 </span> </b></span>
               </div>
               <div class="mt-3 colorAndSize">
                    <span>   
                         <div  class="scrollmenu shadow">
                              <a style="color: white;"  id="first" class="first" href="">Color</a>
                           <% for(var j = 0 ;j < data[i].productArray.color.length ;j++ ) {%> 
                              <a style="padding: 9px; border-radius: 50px ;" class="<%=data[i].productArray.color[j] %> " ></a>
                              <% } %> 
                         </div>
                    
                         
                   </span>
                   <div  class="scrollmenu shadow">
                    <a style="color: white;"  id="first" class="first" href="">Size</a>
                 <% for(var j = 0 ;j < data[i].productArray.size.length ;j++ ) {%> 
                    <a ><%=data[i].productArray.size[j]  %> </a>
                    <% } %> 
               </div>
                    
                    </div>
                  

               </div>
               <div class="quanitity mt-4">
                  
                
               </div>
               
               <div class="opt">
                    <div class="allOpt">
                         <button class="btn btn-primary shadow" style="background-color: #3b5998;" href="#!" role="button" >Buy Now</button>
                         <i onclick="removeFormWishlist('<%=data[i].productArray._id%>')" class="fas fa-trash-alt"></i> 

                    </div>
                    <hr class="shadow">
               </div>
            
           </div>
           <% } %> 
<!-- -------------------------------------------------------------------------------------end of the loop -------------------------------------------------- -->
          
          
     </div>

</div>

<% } %> 
<!-- <script src="/javascripts/user/userCart.js"></script> -->
<style>

.colorAndSize{
     display: flex;
     justify-content: space-evenly;

}
     .red{
    background-color: red;
}
.black{
    background-color: black;
}.green{
    background-color: green;
}.blue{
    background-color: blue;
}.violet{
    background-color: violet;
}.yellow{
    background-color: yellow;
}.brown{
    background-color: brown;
}

div.scrollmenu {
     
  background-color: rgb(255, 255, 255);
  overflow: auto;
  white-space: nowrap;
}
.first{
     
     background-color: rgb(5, 5, 67);
     color: rgb(255, 255, 255);
}
div.scrollmenu a {
     cursor: pointer;
  display: inline-block;
  color: rgb(0, 0, 0);
  text-align: center;
  padding: 6px;
  text-decoration: none;
}

div.scrollmenu a:hover {
  background-color: rgb(243, 243, 243);
}
     .sampleCard{
          position: fixed;
          left: 65%;
          
     }
     .details{
          width: 80%;
     }
   
     .image-session{
          width: 20%;
          float: left;
          background-color: rgb(255, 255, 255);
     }
     .center-details{
          
          text-align: left;
          flex-direction: column;
          display: flex;
          width: 30%;
          float: left;
          background-color: rgb(255, 255, 255);
     }
     .quanitity{
          display: flex;
          justify-content: center;
          align-items: center;
          width: 10%;
          float: left;
          background-color: rgb(255, 255, 255);
     }
     .opt{
         
          width: 20%;
          float: left;
          background-color: rgb(255, 255, 255);
     }
     .allOpt{
          flex-direction: column;
          justify-content: space-between;
          display: flex;
     }
     .imageContainer{
          margin: 1rem;
          width: 100px;
         
          height: 100px;
     }
     .fa-trash-alt{
          margin-left: 75%;
          margin-top: 9%;
          font-size: 1.4rem;
          cursor: pointer;
     }

     @media screen and (max-width:500px){
          .colorAndSize{
     display: flex;
     justify-content: space-evenly;
     flex-direction: column;
     grid-gap: .6rem;
     margin-bottom: .5rem;
     
}
          .sampleCard{
          position: relative;
          left: 0%;
          }
          .cart-left{
               width: 100%;

          }
          .image-session{
               width: 44%;
          }
          .center-details{
               margin-top: 2rem;
               width: 53%;
          }
          .quanitity{
               padding-bottom: .9rem;
               width: 57%
          }
          .opt{
               width: 43%;
          }
          .table-left{
               width: 100%;
          }
          .fa-trash-alt{
               margin-left: 0%;
                margin-top: 12%;
               font-size: 1.2rem;
          }
          .allOpt{
               flex-direction: row;
          }
          .waste{
               width: 0px;
               height: 0px;
          }
 
          .details{
               width: 100%;
          }
          
     }

     #first:hover{
          background-color: rgb(1, 11, 68);
     }
    
</style>

<script>
     function removeFormWishlist(id){
          Swal.fire({
  title: 'Are you sure?',
  text: "You won't be able to revert this!",
  icon: 'warning',
  showCancelButton: true,
  confirmButtonColor: '#3085d6',
  cancelButtonColor: '#d33',
  confirmButtonText: 'Yes, delete it!'
}).then((result) => {
  if (result.isConfirmed) {
    $.ajax({
         url:'/removeFormWishlist',
         data : {id : id},
         method :"delete",
         success :(result)=>{
               if(result.status){
                    document.getElementById('tableRow'+id).style.display = 'none';
                    const Toast = Swal.mixin({
  toast: true,
  position: 'bottom-end',
  showConfirmButton: false,
  timer: 1000,
  timerProgressBar: true,
  didOpen: (toast) => {
    toast.addEventListener('mouseenter', Swal.stopTimer)
    toast.addEventListener('mouseleave', Swal.resumeTimer)
  }
})

Toast.fire({
  icon: 'success',
  title: 'item removed'
})
               }              
         }
    })
  }
})
     }
</script>

<!-- table-left col-md-6 col-11 shadow -->