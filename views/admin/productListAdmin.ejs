
<%-include('./partials/!docType')%>
<%-include('./partials/header')%>
<%-include('./partials/spinner') %> 
<style>
     tr{
          border-bottom: 1px solid gold;
     }
     .vis{
        visibility: hidden;
     }
     #sortBtn{
          border: 1px solid gold ;
          border-radius: 5px;
          background-color: rgb(2, 2, 48) !important;
          color: gold !important;
     }
     .displayNone{
          margin-top: 5%;
          display: none !important;
     }
</style>

<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

<link rel="stylesheet" href="/stylesheets/admin/admin-prouctlist.css">
<div class="container mb-4">
     <div class="row">
         
          <div class="home-content loader">

               <div>
                    <div class="input-group" id="input-group">
                         <div class="form-outline">
                           <input  onkeypress="searchProduct()" type="search" id="searchBar" class="form-control"  placeholder="Search"/>
                           
                         </div>
                         <button style="height: 10%;" type="button" class="btn btn-primary">
                           <i class="fas fa-search"></i>
                         </button>
                       </div>

               </div>
               <div class="w3-dropdown" style="width: 100%;display: flex;justify-content: flex-end;">
                    <button id="" onclick="showOpt()" class="btn btn-outline-primary " type="button"> sort <i class="fas fa-sort-down"></i> </button>
                    <div onkeypress="hideopt()"   id="Demo" class="w3-dropdown-content w3-bar-block w3-border vis" style="  display:flex;flex-direction: column;  top: 40%; left: 91%;">
                      <a onclick="hideopt()"  class="w3-bar-item w3-button">All</a>
                      <a onclick="hideopt() , sortByDate(1)"  class="w3-bar-item w3-button">Recent Product</a>
                      <a onclick="hideopt() , sortByDate(-1)"  class="w3-bar-item w3-button">First Product</a>
                    </div>
                  </div>
               <div class="tableContol" >
          <table class="table table-borderless shadow" id="table" >
               <thead>
                 <tr style="text-align: center;">
                   <th scope="col">#</th>
                   <th scope="col">Product-Image</th>
                   <th scope="col">Details</th>
                   <th scope="col">Catagory</th>
                   <th scope="col">Price </th>
                   <th scope="col">Stock</th>
                   <th scope="col">Color And Size </th>
                   <th scope="col">Actions</th>


                 </tr>
               </thead>
               <tbody id="tabelBody">
                    <% for(var i = 0 ;i< data.product.length;i++){%> 

                 <tr  id="tableRow<%=data.product[i]._id%>" style="background-color: white;" class="table-white shadow">
                   <th scope="row" class="align-middle"><%=i+1 %> </th>
                   <td class="align-middle" >
                         <div class="image-div" style="width: 150px; height: 100px;">
                              <img  src="<%=data.product[i].image[0].imageUrl%>" alt="" style="width: 100%; height: 100%; object-fit: contain;">
                         </div> 

                   </td>
                   <td class="align-middle">
                       <h5 style="letter-spacing: 2px;"> <%=data.product[i].productName%> </h5>
                       
                 
                    </td>

                    <td class="align-middle" style="display: flex; justify-content: space-evenly;"> <h5 class="mt-4 text-info" ><%=data.product[i].catagory%> </h3>
                    
                    </td>
                    <td class="align-middle">
                         <h5 style="color: red;">
                              â‚¹  <%=data.product[i].price%> .00
                         </h5>
                    </td>
                    <td  class="align-middle" >
                         <h5 style="color: rgb(0, 179, 45);">
                              <%=data.product[i].quantity%> /ps
                         </h5>
                    </td>


                    <td class="align-middle"  >
                        <div style="display: flex; flex-direction: column; justify-content: center;"   style="width:15vw">
                              
                         <div class="scrollmenu shadow mb-3"  id="colorPreview"  style="width:15vw">
                              <% for(var j = 0 ;j<data.product[i].color.length ;j++){ %> 
                              <a style="padding: 6px;" id="preColor"> <%=data.product[i].color[j]%> </a>
                              <% } %> 
                             
                             
                            </div>
                            <div class="scrollmenu shadow mb-3"  id="sizePreview" style="width:15vw" >
                              <% for(var j = 0 ;j<data.product[i].size.length ;j++){ %> 
                                   <a style="padding: 6px;" id="sizePreA"> <%=data.product[i].size[j]%> </a>
                                   <% } %> 
                            </div>
                        </div>
                        
                  
                    </td>

                   

                      <td style="border-left: 1px solid rgb(230, 227, 227); padding-left: 1%;" class="align-middle">
                         <button type="button" class="btn btn-outline-info"  onclick="editProudct('<%=data.product[i]._id%>')" >Edit </button>
                         <button onclick="deleteProduct('<%=data.product[i]._id%>')" type="button" class="btn btn-outline-danger">Delete</button>
        
                      </td>
                 

                      </tr>
                      
                      <% } %> 
               </tbody>
             </table>
             
          </div>
          </div>
     </div>
<center><h1 id="notFount"></h1></center>

</div>
<div id="tableSpinner"    class=" displayNone d-flex justify-content-center">
     <div class="spinner-border" role="status">
       <span class="sr-only">Loading...</span>
      
     </div>
     <br>
     <h5>Loading..</h5>
   </div>

<div style="width: 100%; display: flex; justify-content: flex-end;" >
<div class="pagination">
     <a href="#">&laquo;</a>
     <% for(var i = 0 ;i< data.totalLength/10 ; i++){ %> 
     <a  class="active" onclick="morePage('<%=i+11%>')"><%=i+1 %> </a>
     <% } %> 
   
     <a href="#">&raquo;</a>
   </div>
</div>


<div class="w3-container" >
     <div id="productEdit" class="w3-modal" style="z-index: 124;">
       <div class="w3-modal-content">
         <div class="w3-container">
           <span onclick="document.getElementById('productEdit').style.display='none'" class="w3-button w3-display-topright">&times;</span>
           <html style="overflow: hidden; scroll-behavior: smooth; z-index: 1400;" class="supernova" >
               <style>
              
               
               .preview {
                  overflow: hidden;
                  width: 160px;
                  height: 160px;
                  margin: 10px;
                  border: 1px solid red;
              }
          
              .modal-lg {
                  max-width: 1000px !important;
              }
          
              div.scrollmenu {
           color: rgb(6, 5, 68);
           cursor: pointer;
            overflow: auto;
            white-space: nowrap;
          }
          
          div.scrollmenu a {
               border-right: 1px solid gold;
            display: inline-block;
            color: rgb(0, 0, 0);
          
            text-align: center;
            padding: 14px;
          
          }
          
          div.scrollmenu a:hover {
               color: rgb(0, 0, 0);
            background-color: rgb(232, 229, 243);
          }
          
          .scrollmenu::-webkit-scrollbar{
               display: none;
          }
          
               </style>
          <%-include('./partials/spinner') %> 
          
    
           
          <!-- Material Dashboard CSS -->
                 <link rel="stylesheet" href="https://unpkg.com/dropzone/dist/dropzone.css" />
               <link href="https://unpkg.com/cropperjs/dist/cropper.css" rel="stylesheet"/>
          
          <script src="https://unpkg.com/dropzone"></script>
               <script src="https://unpkg.com/cropperjs"></script>
          
                   <meta name="robots" content="noindex,follow" />
                   <style type="text/css">@media print{.form-section{display:inline!important}.form-pagebreak{display:none!important}.form-section-closed{height:auto!important}.page-section{position:initial!important}}</style>
                   <link type="text/css" rel="stylesheet" href="https://cdn01.jotfor.ms/themes/CSS/5e6b428acc8c4e222d1beb91.css?themeRevisionID=5eb3b4ae85bd2e1e2966db96"/>
                   <link type="text/css" rel="stylesheet" href="https://cdn02.jotfor.ms/css/styles/payment/payment_styles.css?3" />
                   <link type="text/css" rel="stylesheet" href="https://cdn03.jotfor.ms/css/styles/payment/payment_feature.css?3" />
                   <style type="text/css" id="tempThumbnail">@media only screen and (max-width: 800px) { body, .supernova { background-color: #fff !important; }
                       .form-all { box-shadow: none !important}
                       }
                   </style>
                   <style>
                        .modal-backdrop{
                             z-index: 0;

                        }
                   html { -webkit-overflow-scrolling: touch; overflow: scroll; }body { height: 100%; overflow: scroll; }</style>
               </head>
          
          
          <!-- ------------------------------------------------------------------------------------------------------------------start of the crop   modal---------------------------------------------------------------------------- -->
          <% for(var i = 1;i<=6 ; i++){%> 
          
               <div class="modal fade" id="modal<%=i%>" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabelaria-hidden="true style="z-index: 1055;">
                    <div class="modal-dialog" role="document" style="z-index:1055 ;" >
                         <div class="modal-content">
                              <div class="modal-header">
                                   <h5 class="modal-title" id="exampleModalLabel">Crop Image Here</h5>
                                   <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                   </button>
                              </div>
                              <div class="modal-body">
                                   <div class="img-container">
                                        <div class="row">
                                        <div class="col-md-8">
                                             <img src="" id="sampleImage<%=i%>" />
                                        </div>
                                        <div class="col-md-4">
                                             <div class="preview" id="preview<%=i%>"></div>
                                        </div>
                                        </div>
                                   </div>
                              </div>
                              <div class="modal-footer">
          
                                   <button type="button" id="crop<%=i%>" class="btn btn-primary">Crop</button>
                                   <button type="button" class="btn btn-secondary" data-dismiss="modal"  onclick="closeModal1('<%=i%>')"  >Cancel</button>
          
                              </div>
                         </div>
                    </div>
                    </div>
          
                    <% } %> 
          <!-- --------------------------------------------------------------------------------------------------------------------------end of the crop  modal-------------------------------------------------------------- -->
          
          
          <!-- --------------------------------------------------------------------------------------------------------------------------start of the public id -------------------------------------------------------------- -->
          
          
          
          <% for(var i = 1 ;i<= 6 ; i++) {%> 
              <input style="display: none;" type="text" id="publicId<%=i%>">
              <% } %> 
          
          <!-- --------------------------------------------------------------------------------------------------------------------------end of the public id ------------------------------------------------------------- -->
          
          
          
          
               <body style="overflow-x:hidden;">
                    <div class="home-content loader">
                   <div class="jotform-form">
                       <div role="main" class="form-all" style="margin:0 auto;">
                           <style>.form-all:before { background: none;}</style>
                           <ul class="form-section page-section shadow-lg">
                           <li id="cid_1" class="form-input-wide" data-type="control_head">
                               <div class="form-header-group header-large">
                                   <div class="header-text httal htvam">
                                       <h2 id="header_1" class="form-header" data-component="header">Increase Your Inventroy</h2>
                                   </div>
                               </div>
                           </li>
                           <!-- name and barnd  -->
                           <li class="form-line" data-type="control_fullname" id="id_2">
                              <div id="cid_2" class="form-input-wide" data-layout="full">
                                  <div data-wrapper-react="true"><span class="form-sub-label-container" style="vertical-align:top" data-input-type="first">
                                      <input  onkeyup="clearMainErr()" type="text" id="productName" class="form-textbox"  data-component="first"  name=""     />
                                      <label class="form-sub-label" for="first_2" id="sublabel_2_first" style="min-height:13px" aria-hidden="false"> Product Name </label>
                                       </span><span class="form-sub-label-container" style="vertical-align:top" data-input-type="last"><input  onkeyup="clearMainErr()" type="text" id="brandName" name="brand" class="form-textbox" data-defaultvalue="" size="15" value="" data-component="last" aria-labelledby="label_2 sublabel_2_last" />
                                      <label class="form-sub-label" for="last_2" id="sublabel_2_last" style="min-height:13px" aria-hidden="false"> Brand Name  </label></span>
                                  </div>
                              </div>
                          </li>
                          <!-- {{ end of the name and bradn}} -->
          
                          <!-- {{ catagory and subcatagory}} -->
                          
                          <li class="form-line" data-type="control_address" id="id_4">
                               <div id="cid_4" class="form-input-wide" data-layout="full">
                                   <div summary="" class="form-address-table jsTest-addressField">
                                       <div class="form-address-line-wrapper jsTest-address-line-wrapperField"><span class="form-address-line form-address-street-line jsTest-address-lineField"><span class="form-sub-label-container" style="vertical-align:top">
                                       <div class="form-address-line-wrapper jsTest-address-line-wrapperField">
           
                                           <!-- catagory  -->
                                           <span class="form-address-line form-address-country-line jsTest-address-lineField ">
                                               <span class="form-sub-label-container" style="vertical-align:top">
                                                   <!-- subcatagory -->
                                                   <select class="form-dropdown form-address-country noTranslate"name="catagory" id="mainCat" data-component="country" required="" aria-labelledby="label_4 sublabel_4_country" onchange="getSub()" onkeyup="clearMainErr()">
                                                      
                                                         
                                                   </select>
                                                   <label class="form-sub-label" for="input_4_country" id="sublabel_4_country" style="min-height:13px" aria-hidden="false"> Select a Catagory </label>
                                               </span>
                                           </span>
           
                                       <span class="form-address-line form-address-country-line jsTest-address-lineField ">
                                           <span class="form-sub-label-container" style="vertical-align:top">
                                               <!-- subcatagory -->
                                               <span id="loaderForSubCatagory" style="display: none; position: absolute;" class="spinner-grow spinner-grow-lg" role="status" aria-hidden="true">     &nbsp &nbsp   Loading </span>
                                               <select class="   form-dropdown form-address-country noTranslate" name="subCatagory" id="subCatSel" data-component="country" required="" aria-labelledby="label_4 sublabel_4_country"  onkeyup="clearMainErr()">
                                                 
                                               </select>
                                               <label class="form-sub-label" for="input_4_country" id="sublabel_4_country" style="min-height:13px" aria-hidden="false"> Select a sub Catagory </label>
                                           </span>
                                       </span>
                                       </div>
                                   </div>
                               </div>
                           </li>
          
                          <!-- end of the catagory and subcatagory -->
                          <hr width="100%">
          
          
          
          
                          <!-- ------------------------------------------------------------------------------------------- -->
          
          
                          <li class="form-line card-3col" data-type="control_paypalcomplete" id="id_19" data-payment="true">
                              <label class="form-label form-label-top" id="label_19" for="input_19"> Products Image </label>
                              <div id="cid_19" class="form-input-wide" data-layout="full">
                                  <div data-wrapper-react="true">
                                      <div data-wrapper-react="true" class="product-container-wrapper">
                                      <div class="filter-container"></div>
                                          <!-- image is here -->
                                      <div data-wrapper-react="true">
                                          <span class="form-product-item hover-product-item on_col1 show_image show_option full_img new_ui" categories="non-categorized" pid="1001" aria-labelledby="label_19" style="height: 200px;">
                                              <div data-wrapper-react="true" class="form-product-item-detail new_ui">
                                                  <div class="p_col">
                                                  </div>
                                                  <div class="p_image">
                                                      
                                                      <div style="position: relative;" role="img"  class="image_area form-product-image-with-options">
                                                          <!-- loading  -->
                                                          <div  id="imageSpinner1" style=" display: none; position: absolute; left: 45%; top: 50%;" class="spinner-border" style="width: 5rem; height: 5rem;" role="status">
                                                              <span class="visually-hidden">Loading...</span>
                                                            </div>
                                                      <img src="" alt="products" id="chekPreview1" >
                                                  </div>
                                                  </div>
                                              <p style="position: absolute; text-align: center; cursor: pointer; color: white; font-size: 20px;"  id="chekPreview1" accept="image/gif, image/jpeg, image/png" >Add Products</p>
                                                  <button style="width: 100%; cursor: pointer;" type="button" class="btn  btn-primary"><input type="file" accept=".jpg"  name="img1" id="image1" style="opacity: 0;"  ></button>
                                            <textarea name="image1_b64" id="imageValue1" cols="30" rows="10"  hidden></textarea>
          
                                              </div>
                                          </span> 
          
                                          <div class="p_item_separator "></div>
                                          <span class="form-product-item hover-product-item on_col2 show_image show_option full_img new_ui" categories="non-categorized" pid="1002" aria-labelledby="label_19">
                                              <div data-wrapper-react="true" class="form-product-item-detail new_ui">
                                                  <div class="p_col">
                                                  
                                                  </div>
                                                  <div class="p_image">
                                                      <div style="position: relative;" role="img"  class="image_area form-product-image-with-options">
                                                          <div  id="imageSpinner2" style=" display: none;position: absolute; left: 45%; top: 50%;" class="spinner-border" style="width: 5rem; height: 5rem;" role="status">
                                                              <span class="visually-hidden">Loading...</span>
                                                            </div>
                                                      <img src="" alt="produts" id="chekPreview2" >
                                                  </div>
                                                  <p style="position: absolute; text-align: center; cursor: pointer; color: white; font-size: 20px;" >Add Products</p>
                                                  <button style="width: 100%; cursor: pointer;" type="button" class="btn  btn-primary"><input type="file"  accept=".jpg" name="img2" id="image2" onchange="addImg(2)"  style="opacity: 0;"></button>
                                                  <textarea name="image1_b64" id="imageValue2" cols="30" rows="10"  hidden></textarea>
                                                  </div>
                                              
                                              </div>
                                          </span>
                                          <div class="p_item_separator "></div>
                                          <span class="form-product-item hover-product-item on_col3 show_image show_option new_ui" categories="non-categorized" pid="1003" aria-labelledby="label_19">
                                              <div data-wrapper-react="true" class="form-product-item-detail new_ui">
                                                  <div class="p_col">
                                                  
                                                  </div>
                                                  <div class="p_image">
                                                      <div style="position: relative;" role="img"  class="image_area form-product-image-with-options">
                                                          <div  id="imageSpinner3" style="  display: none; position: absolute; left: 45%; top: 50%;" class="spinner-border" style="width: 5rem; height: 5rem;" role="status">
                                                              <span class="visually-hidden">Loading...</span>
                                                            </div> 
                                                      <img src="" alt="products" id="chekPreview3" >
                                                  </div>
                                                  <p style="position: absolute; text-align: center; cursor: pointer; color: rgb(255, 255, 255); font-size: 20px;" >Add Products</p>
                                                  <button style="width: 100%; cursor: pointer;" type="button" class="btn  btn-primary"><input type="file" name="img3" id="image3"  style="opacity: 0;" accept=".jpg"></button>
                                                  <textarea name="image1_b64" id="imageValue3" cols="30" rows="10"  hidden></textarea>
          
                                                  </div>
                                                  
                                              </div>
                                          </span>
                                          
                                      </div>
                                      </div>
                                  </div>
                              </div>
                              <hr>
                          </li>
          
                          <!-- -------------------------------------end of  the image sesseion ------------------------------------------------------ -->
          
          
          
          
          
                          <!-- -------------------------------------start of the  varient session  sesseion ------------------------------------------------------ -->
          
                          <!-- {{ color and size session }} -->
          
                          <li class="form-line" data-type="control_address" id="id_4">
                              <h5>Edit  Varients </h5>
                              <div id="cid_4" class="form-input-wide" data-layout="full">
                                  <div summary="" class="form-address-table jsTest-addressField">
                                      <div class="form-address-line-wrapper jsTest-address-line-wrapperField"><span class="form-address-line form-address-street-line jsTest-address-lineField"><span class="form-sub-label-container" style="vertical-align:top">
                                      <div class="form-address-line-wrapper jsTest-address-line-wrapperField">
                                        <!-- {{ catagory}} -->
                                      </div>
                                  </div>
                              </div>
          
                          </li>
          
                          <!-- {{ end of the size and color sesseion}} -->
          
                          <!-- {{ start of the quanitity and price sesseion }} -->
          
                           <li class="form-line" data-type="control_address" id="id_4">
                    <h5>Add  The Avaliable  Color Varient </h5>
                        <div id="cid_4" class="form-input-wide" data-layout="full">
                        <div summary="" class="form-address-table jsTest-addressField">
                            <div class="scrollmenu shadow mb-3"  id="funcPreColr" >
                                <a id="preColor">Preview</a>
                               
                              </div>

                            <div class="form-address-line-wrapper jsTest-address-line-wrapperField"><span class="form-address-line form-address-street-line jsTest-address-lineField"><span class="form-sub-label-container" style="vertical-align:top">
                            <div  style="margin-left: 15%; width: 70%;"class="form-address-line-wrapper jsTest-address-line-wrapperField">

                        
                            <span class="form-address-line form-address-country-line jsTest-address-lineField ">
                                <span  class="form-sub-label-container" style="vertical-align:top ">
                                    <!-- subcatagory -->
                                    <span  id="loaderForSubCatagory" style="display: none; position: absolute;" class="spinner-grow spinner-grow-lg" role="status" aria-hidden="true">     &nbsp &nbsp   Loading </span>
                                    <select class="   form-dropdown form-address-country noTranslate" name="" id="ProductColor"  onkeyup="clearMainError()">
                                        <option ></option>
                                        <option >red</option>
                                        <option >black</option>
                                        <option >blue</option>
                                        <option >green</option>
                                        <option >violet</option>
                                        <option >yellow</option>
                                        <option >brown</option>

                                    </select>
                                    
                                </span>
                                <button onclick="addColorVarient()" class="btn btn-danger">ADd</button>

                            </span>
                            </div>
                            <p style="color: red;" id="colorErr"></p>

                        </div>
                    </div>

                </li>
                <!-- end of the color sessionn  -->


                <!-- {{ color and size session }} -->

                <li class="form-line" data-type="control_address" id="id_4">
                    <h5>Add  The Avaliable  Size Varient </h5>
                        <div id="cid_4" class="form-input-wide" data-layout="full">
                        <div summary="" class="form-address-table jsTest-addressField">
                            <div class="scrollmenu shadow mb-3"  id="sizePreview2" >
                                <a id="preColor">Preview</a>
                               
                              </div>

                            <div class="form-address-line-wrapper jsTest-address-line-wrapperField"><span class="form-address-line form-address-street-line jsTest-address-lineField"><span class="form-sub-label-container" style="vertical-align:top">
                            <div  style="margin-left: 15%; width: 70%;"class="form-address-line-wrapper jsTest-address-line-wrapperField">

                        
                            <span class="form-address-line form-address-country-line jsTest-address-lineField ">
                                <span  class="form-sub-label-container" style="vertical-align:top ">
                                    <!-- subcatagory -->
                                    <span  id="loaderForSubCatagory" style="display: none; position: absolute;" class="spinner-grow spinner-grow-lg" role="status" aria-hidden="true">     &nbsp &nbsp   Loading </span>
                                    <select class="   form-dropdown form-address-country noTranslate" name="" id="productSize"  onkeyup="clearMainError()">
                                        <option ></option>
                                        <option >SM</option>
                                        <option >L</option>
                                        <option >XL</option>
                                        <option >XXL</option>
                                        <option >M</option>
                                        <option >EX</option>

                                    </select>
                                    
                                </span>
                                <button onclick="addSizeVarient()" class="btn btn-danger">ADd</button>

                            </span>
                            </div>
                            <p style="color: red;" id="sizeErr"></p>

                        </div>
                    </div>
                    <hr>

                </li>
<!-- ----------------------------price--------------------------------- -->
                <li class="form-line" data-type="control_fullname" id="id_2">
                    <div id="cid_2" class="form-input-wide" data-layout="full">
                        <div data-wrapper-react="true"><span class="form-sub-label-container" style="vertical-align:top" data-input-type="first">
                            <input oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : null" autocomplete="" onkeypress="return event.charCode != 32" type="number" min="1" class="form-textbox"  data-component="first"  name=""   onkeyup="cleaerColorErr()"   id="productPrice" />
                            <label class="form-sub-label" for="first_2" id="sublabel_2_first" style="min-height:13px" aria-hidden="false"> Price </label>
                             </span><span class="form-sub-label-container" style="vertical-align:top" data-input-type="last">
                                
                                <input  oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : null" autocomplete="" onkeypress="return event.charCode != 32" type="number" min="1"    onkeyup="cleaerColorErr()" class="form-textbox" data-defaultvalue="" size="15" value="" data-component="last" aria-labelledby="label_2 sublabel_2_last" id="quanitity" />
                            <label class="form-sub-label" for="last_2" id="sublabel_2_last" style="min-height:13px" aria-hidden="false"> Quanity  </label></span>
                        </div>
                    </div>
                </li>
               
               <p id="varientErr" style="color: red; margin-left: 1%;margin-top: 1%;"></p>

<!-- ------------------------------end of the product and quantity-------------------- -->

          
                          <!-- {{ end of the quanity of the price session }} -->
                           <!-- text area of Discription -->
                           <li class="form-line" data-type="control_textarea" id="id_14">
                               <label class="form-label form-label-top" id="label_14" for="input_14"> More  in  Discription </label>
                               <div class="form-input-wide" data-layout="full"><textarea id="discription" class="form-textarea" name="discription" style="width:648px;height:163px" data-component="textarea" aria-labelledby="label_14" onkeyup="clearMainErr()"></textarea></div>
                           </li>
                           
                           <li class="form-line" data-type="control_button" id="id_13">
                               <div id="cid_13" class="form-input-wide" data-layout="full">
                                  
                                   <div data-align="center" class="form-buttons-wrapper form-buttons-center jsTest-button-wrapperField">
                                      <button id="input_13" type="button" class="form-submit-button submit-button jf-form-buttons jsTest-submitField" data-component="button" data-content="" onclick="submitEditForm()"  >Add Product</button></div>
                                      <center> <p id="mainErr" style="color: red;"></p></center>
          
                               </div>
                           </li>
                           </ul>
                       </div>
                      </div>
               </div>
                </body>
           </html>
         </div>     
       </div>
     </div>
   </div>

   <script src="/javascripts/admin/adminProductEdit.js"></script>

   <script>


// {{ to sort by data }}loader





function createTable(data){ 

     document.getElementById('tableSpinner').classList.remove("displayNone")
     var tBody =  document.getElementById('tabelBody');
     document.getElementById('notFount').innerHTML = ""
      tBody.innerHTML = ""
     for(var i = 0  ;i< data.length ;i++){


          //{{ adding color }}
          var x= `<div class="scrollmenu shadow mb-3"  id="colorPreview"  style="width:15vw"> `
                            
                             
                         
             for(var j = 0 ;j<data[i].color.length ;j++){
                           var colorADd = `<a style="padding: 6px;" id="preColor">${data[i].color[j]} </a> `;
                           
                           x += colorADd;
                          } 

                          

              //{{ end of the adding color}}


                    // {{add color }} 
                          var y = `<div class="scrollmenu shadow mb-3"  id="sizePreview"  style="width:15vw"> `

                              for( h = 0 ;h < data[i].size.length ;h++){
                                var sizeP = `  <a style="padding: 6px;" id="sizePreA"> ${data[i].size[h]}</a>`
                                   y+= sizeP;
                              }

               //{{ end of the adding size}}

                             

          var table = `
     <tr  id="tableRow${data[i]._id}" style="background-color: white;" class="table-white shadow">
                   <th scope="row" class="align-middle">${i+1}</th>
                   <td class="align-middle" >
                         <div class="image-div" style="width: 150px; height: 100px;">
                              <img  src="${data[i].image[0].imageUrl}" alt="" style="width: 100%; height: 100%; object-fit: contain;">
                         </div> 

                   </td>
                   <td class="align-middle">
                       <h5 style="letter-spacing: 2px;">${data[i].productName}</h5>
                       
                 
                    </td>

                    <td class="align-middle" style="display: flex; justify-content: space-evenly;"> <h5 class="mt-4 text-info" ${data[i].catagory} </h3>
                    
                    </td>
                    <td class="align-middle">
                         <h5 style="color: red;">
                              â‚¹ ${data[i].price}.00
                         </h5>
                    </td>
                    <td  class="align-middle" >
                         <h5 style="color: rgb(0, 179, 45);">
                              ${data[i].quantity} /ps
                         </h5>
                    </td>


                    <td class="align-middle" >
                        <div style="display: flex; flex-direction: column; width:15vw"  >
                              
                         ${x}
                    </div>


                    ${y}
                            
                             
                            </div>
                        </div>
                        
                  
                    </td>

                   

                      <td style="border-left: 1px solid rgb(230, 227, 227); padding-left: 1%;" class="align-middle">
                         <button type="button" class="btn btn-outline-info"  onclick="editProudct('${data[i]._id}')" >Edit </button>
                         <button onclick="deleteProduct('${data[i]._id}')" type="button" class="btn btn-outline-danger">Delete</button>
        
                      </td>
                 

                      </tr>
                      ` ;
                    
  

                      setTimeout(()=>{
                     document.getElementById('tableSpinner').classList.add("displayNone")
                    },300);
                    
                    tBody.innerHTML += table
               }
}

function sortByDate(date){
     document.getElementById('tableSpinner').classList.remove("displayNone")
     var tBody =  document.getElementById('tabelBody');
     document.getElementById('notFount').innerHTML = ""
         tBody.innerHTML = ""

   var innerVar = document.getElementById('varients');
 
     var searchKey =   document.getElementById("searchBar").value
     $.ajax({
          url:"/admin/products/sortDate",
          data : {date:parseInt(date)},
          method:'post',
          success :(result)=>{
              
              console.log(result.status);
           createTable(result.status) 
                        
                      
                    
          }
     })

}






     //    {{ to show sort opton }}

     function showOpt() {
     document.getElementById("Demo").classList.toggle('vis')
}


function hideopt(){
     document.getElementById("Demo").classList.toggle('vis')
}
// {{ end of the sort option }}










 function deleteProduct(id){
     Swal.fire({
  title: 'Are you sure?',
  text: "You won't be able to revert this!",
  icon: 'warning',
  showCancelButton: true,
  confirmButtonColor: '#3085d6',
  cancelButtonColor: '#d33',
  confirmButtonText: 'Yes, delete it!'
}).then((result) => {
  if (result.isConfirmed) {
          $.ajax({
               url:"/admin/products/deleteProducts",
               data:{id:id},
               method:"post",
               success :(result)=>{
                if(result.status == true){
                     document.getElementById('tableRow'+id).style.display = "none"
                    Swal.fire(
               'Success',
               'Product Deleted Successfully',
               'success'
               )
                }else{
                    Swal.fire(
               'OOps !',
                result.status,
               'Eroor'
               )
                }
               }
          })
  }
})
 }



function morePage(num){
     var tBody =  document.getElementById('tabelBody');
     document.getElementById('notFount').innerHTML = ""
         tBody.innerHTML = ""

   var innerVar = document.getElementById('varients');
  innerVar.innerHTML = ""
     var searchKey =   document.getElementById("searchBar").value
    parseInt(num)
    $.ajax({
          url:"/admin/products/pagination",
          data:{skip:parseInt(num)},
          method:"post",
          success :(result)=>{
               createTable(result.status);
          }
    })
}


         var tBody =  document.getElementById('tabelBody');
        function searchProduct(){
           var searchKey =   document.getElementById("searchBar").value
           console.log(searchKey);
             if(searchKey == null){
                 alert("hel")
                    $.ajax({
                         url:"/admin/products/pagination",
                         method:"post",
                         success :(result)=>{

                              createTable(result.status);
                           

                         }
                    })
             }else{
            
             // {{ sending the requst to back end }}
             $.ajax({
                  url:'/admin/products/search',
                  data:{key:searchKey},
                  method:"post",
                  success:(result)=>{

                    tBody.innerHTML = ""

                    if(result.status.length == 0 ){
                                   document.getElementById('notFount').innerHTML = "No Result Fount"
                                   return;
                              }
                              document.getElementById('notFount').innerHTML = ""

                             createTable(result.status)
                   

                  }
             })
          }
             
        }
   </script>
